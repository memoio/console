"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2029],{12029:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i,a=n(23430),o=n(18489),r=n(50390),s=n(34424),l=n(65771),c=n(81378),d=n(86509),m=n(62449),h=n(4285),u=n(66946),g=n(12066),p=n(25594);!function(e){e.unknown="unknown",e.form="form",e.redirect="redirect",e.serviceAccount="service-account"}(i||(i={}));var f=n(44149),x=n(30324),v=n(24442),j=n(18221),Z=n(45980),b=n(28948),w=n(95410),S=n(72462),y=n(52971),P=n(62559),N=function(e){return(0,P.jsx)("svg",(0,o.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",className:"min-icon",fill:"currentcolor",viewBox:"0 0 12 12"},e),{},{children:(0,P.jsx)("path",{id:"Path_7819","data-name":"Path 7819",d:"M9.884,3.523H8.537V2.27A2.417,2.417,0,0,0,6,0,2.417,2.417,0,0,0,3.463,2.27V3.523H2.116A2.019,2.019,0,0,0,0,5.423V9.413a2.012,2.012,0,0,0,2.062,1.9L6,12l3.938-.688A2.012,2.012,0,0,0,12,9.413V5.423a2.019,2.019,0,0,0-2.116-1.9M6.5,7.658v.724a.474.474,0,0,1-.472.474H5.971A.474.474,0,0,1,5.5,8.381V7.658a.9.9,0,0,1-.394-.744h0a.894.894,0,1,1,1.4.744m.985-4.135H4.514V2.27A1.416,1.416,0,0,1,6,.94,1.416,1.416,0,0,1,7.486,2.27Z",fill:"#071d43"})}))},C=function(e){return(0,P.jsxs)("svg",(0,o.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",className:"min-icon",fill:"currentcolor",viewBox:"0 0 9.008 12"},e),{},{children:[(0,P.jsx)("defs",{children:(0,P.jsx)("clipPath",{id:"clip-path",children:(0,P.jsx)("rect",{id:"Rectangle_991","data-name":"Rectangle 991",width:"9.008",height:"12",fill:"#071d43"})})}),(0,P.jsxs)("g",{id:"Group_2365","data-name":"Group 2365",clipPath:"url(#clip-path)",children:[(0,P.jsx)("path",{id:"Path_7088","data-name":"Path 7088",d:"M26.843,6.743a3.4,3.4,0,0,0,3.411-3.372,3.411,3.411,0,0,0-6.822,0,3.4,3.4,0,0,0,3.411,3.372",transform:"translate(-22.334)",fill:"#071d43"}),(0,P.jsx)("path",{id:"Path_7089","data-name":"Path 7089",d:"M8.639,157.057a5.164,5.164,0,0,0-1.957-1.538,5.438,5.438,0,0,0-1.083-.362,5.2,5.2,0,0,0-1.117-.123c-.075,0-.151,0-.225.005H4.231a4.928,4.928,0,0,0-.549.059,5.236,5.236,0,0,0-3.276,1.92c-.029.039-.059.078-.086.116h0a1.723,1.723,0,0,0-.134,1.784,1.583,1.583,0,0,0,.255.356,1.559,1.559,0,0,0,.337.267,1.613,1.613,0,0,0,.4.167,1.742,1.742,0,0,0,.449.058H7.389a1.747,1.747,0,0,0,.452-.058,1.593,1.593,0,0,0,.4-.169,1.524,1.524,0,0,0,.335-.271,1.548,1.548,0,0,0,.251-.361,1.761,1.761,0,0,0-.191-1.85",transform:"translate(0.001 -147.766)",fill:"#071d43"})]})]}))},L=n(41227),A=(0,m.Z)((function(e){return(0,d.Z)({root:{"& .MuiOutlinedInput-root":{paddingLeft:0,"& svg":{marginLeft:4,height:14,color:e.palette.primary.main},"& input":{padding:10,fontSize:14,paddingLeft:0,"&::placeholder":{fontSize:12},"@media (max-width: 900px)":{padding:10}},"& fieldset":{},"& fieldset:hover":{borderBottom:"2px solid #000000",borderRadius:0}}}})}));function I(e){var t=A();return(0,P.jsx)(g.Z,(0,o.Z)({classes:{root:t.root},variant:"standard"},e))}var k=(0,s.$j)((function(e){return{loggedIn:e.loggedIn}}),{userLoggedIn:f.nD,setErrorSnackMessage:f.Ih})((0,h.Z)((function(e){return(0,d.Z)((0,o.Z)({root:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"auto"},form:{width:"100%"},submit:{margin:"30px 0px 8px",height:40,width:"100%",boxShadow:"none",padding:"16px 30px"},learnMore:{textAlign:"center",fontSize:10,"& a":{color:"#2781B0"},"& .min-icon":{marginLeft:12,marginTop:2,width:10}},separator:{marginLeft:8,marginRight:8},linkHolder:{marginTop:20},miniLinks:{margin:"auto",fontSize:10,textAlign:"center",color:"#B2DEF5","& a":{color:"#B2DEF5",textDecoration:"none"},"& .min-icon":{height:10,color:"#B2DEF5"}},miniLogo:{marginTop:8,"& .min-icon":{height:12,paddingTop:2}},loginPage:{height:"100%",margin:"auto"},loginContainer:{flexDirection:"column","& .right-items":{backgroundColor:"white",borderRadius:3,boxShadow:"6px 6px 50",padding:20},"& .consoleTextBanner":{fontWeight:300,fontSize:"calc(3vw + 3vh + 1.5vmin)",lineHeight:1.15,color:"#ffffff",flex:1,textAlign:"center",height:"100%",display:"flex",justifyContent:"flex-start",margin:"auto","& .logoLine":{display:"flex",alignItems:"center",fontSize:18,marginTop:40},"& .left-items":{margin:"auto",paddingTop:100,paddingBottom:60},"& .left-logo":{"& .min-icon":{color:"white",fontSize:28,width:108},marginBottom:10},"& .text-line1":{font:" 100 44px 'Lato'"},"& .text-line2":{fontSize:80,fontWeight:100,textTransform:"uppercase"},"& .text-line3":{fontSize:14,fontWeight:"bold"},"& .logo-console":{display:"flex",alignItems:"center","@media (max-width: 900px)":{marginTop:20,flexFlow:"column","& svg":{width:"50%"}}}}},"@media (max-width: 900px)":{loginContainer:{display:"flex",flexFlow:"column","& .consoleTextBanner":{margin:0,flex:2,"& .left-items":{alignItems:"center",textAlign:"center"},"& .logoLine":{justifyContent:"center"}}}},loadingLoginStrategy:{textAlign:"center",width:40,height:40},headerTitle:{marginRight:"auto",marginBottom:15},submitContainer:{textAlign:"right"},linearPredef:{height:10},loaderAlignment:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"},retryButton:{alignSelf:"flex-end"},loginComponentContainer:{maxWidth:360,width:"100%",alignSelf:"center"}},S.bK))}))((function(e){var t=e.classes,n=e.userLoggedIn,o=e.setErrorSnackMessage,s=(0,r.useState)(""),d=(0,a.Z)(s,2),m=d[0],h=d[1],g=(0,r.useState)(""),f=(0,a.Z)(g,2),S=f[0],A=f[1],k=(0,r.useState)(""),E=(0,a.Z)(k,2),T=E[0],B=E[1],M=(0,r.useState)({loginStrategy:i.unknown,redirect:""}),z=(0,a.Z)(M,2),F=z[0],R=z[1],_=(0,r.useState)(!1),H=(0,a.Z)(_,2),D=H[0],V=H[1],W=(0,r.useState)(!0),K=(0,a.Z)(W,2),G=K[0],O=K[1],q=(0,r.useState)(""),J=(0,a.Z)(q,2),U=(J[0],J[1]),$=(0,r.useState)(!0),Q=(0,a.Z)($,2),X=Q[0],Y=Q[1],ee={form:"/api/v1/login","service-account":"/api/v1/login/operator"},te={form:{accessKey:m,secretKey:T},"service-account":{jwt:S}},ne=function(e){e.preventDefault(),V(!0),x.Z.invoke("POST",ee[F.loginStrategy]||"/api/v1/login",te[F.loginStrategy]).then((function(){n(!0),F.loginStrategy===i.form&&localStorage.setItem("userLoggedIn",(0,b.ug)(m));var e="/";localStorage.getItem("redirect-path")&&""!==localStorage.getItem("redirect-path")&&(e="".concat(localStorage.getItem("redirect-path")),localStorage.setItem("redirect-path","")),v.Z.push(e)})).catch((function(e){V(!1),o(e)}))};(0,r.useEffect)((function(){G&&x.Z.invoke("GET","/api/v1/login").then((function(e){R(e),O(!1)})).catch((function(e){o(e),O(!1)}))}),[G,o]),(0,r.useEffect)((function(){X&&x.Z.invoke("GET","/api/v1/check-version").then((function(e){e.current_version;var t=e.latest_version;U(t),Y(!1)})).catch((function(e){x.Z.invoke("GET","/api/v1/check-operator-version").then((function(e){e.current_version;var t=e.latest_version;U(t),Y(!1)})).catch((function(e){Y(!1)}))}))}),[X,Y,U]);var ie=null;switch(F.loginStrategy){case i.form:ie=(0,P.jsx)(r.Fragment,{children:(0,P.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:ne,children:[(0,P.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,P.jsx)(p.ZP,{item:!0,xs:12,className:t.spacerBottom,children:(0,P.jsx)(I,{fullWidth:!0,id:"accessKey",className:t.inputField,value:m,onChange:function(e){return h(e.target.value)},placeholder:"Username",name:"accessKey",autoComplete:"username",disabled:D,variant:"outlined",InputProps:{startAdornment:(0,P.jsx)(l.Z,{position:"start",className:t.iconColor,children:(0,P.jsx)(C,{})})}})}),(0,P.jsx)(p.ZP,{item:!0,xs:12,children:(0,P.jsx)(I,{fullWidth:!0,className:t.inputField,value:T,onChange:function(e){return B(e.target.value)},name:"secretKey",type:"password",id:"secretKey",autoComplete:"current-password",disabled:D,placeholder:"Password",variant:"outlined",InputProps:{startAdornment:(0,P.jsx)(l.Z,{position:"start",className:t.iconColor,children:(0,P.jsx)(N,{})})}})})]}),(0,P.jsx)(p.ZP,{item:!0,xs:12,className:t.submitContainer,children:(0,P.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",id:"do-login",className:t.submit,disabled:""===T||""===m||D,children:"Login"})}),(0,P.jsx)(p.ZP,{item:!0,xs:12,className:t.linearPredef,children:D&&(0,P.jsx)(c.Z,{})})]})});break;case i.redirect:ie=(0,P.jsx)(r.Fragment,{children:(0,P.jsx)(u.Z,{component:"a",href:F.redirect,type:"submit",variant:"contained",color:"primary",id:"sso-login",className:t.submit,children:"Login with SSO"})});break;case i.serviceAccount:ie=(0,P.jsx)(r.Fragment,{children:(0,P.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:ne,children:[(0,P.jsx)(p.ZP,{container:!0,spacing:2,children:(0,P.jsx)(p.ZP,{item:!0,xs:12,children:(0,P.jsx)(I,{required:!0,className:t.inputField,fullWidth:!0,id:"jwt",value:S,onChange:function(e){return A(e.target.value)},name:"jwt",autoComplete:"off",disabled:D,placeholder:"Enter JWT",variant:"outlined",InputProps:{startAdornment:(0,P.jsx)(l.Z,{position:"start",children:(0,P.jsx)(w.mB,{})})}})})}),(0,P.jsx)(p.ZP,{item:!0,xs:12,className:t.submitContainer,children:(0,P.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",id:"do-login",className:t.submit,disabled:""===S||D,children:"Login"})}),(0,P.jsx)(p.ZP,{item:!0,xs:12,className:t.linearPredef,children:D&&(0,P.jsx)(c.Z,{})})]})});break;default:ie=(0,P.jsx)("div",{className:t.loaderAlignment,children:G?(0,P.jsx)(L.Z,{className:t.loadingLoginStrategy}):(0,P.jsxs)(r.Fragment,{children:[(0,P.jsx)("div",{children:(0,P.jsxs)("p",{style:{color:"#000",textAlign:"center"},children:["An error has occurred",(0,P.jsx)("br",{}),"The backend cannot be reached."]})}),(0,P.jsx)("div",{children:(0,P.jsx)(u.Z,{onClick:function(){O(!0)},endIcon:(0,P.jsx)(j.default,{}),color:"primary",variant:"outlined",id:"retry",className:t.retryButton,children:"Retry"})})]})})}var ae=F.loginStrategy===i.serviceAccount?"Operator":"Console";return(0,P.jsxs)("div",{className:t.root,children:[(0,P.jsx)(y.ZP,{}),(0,P.jsx)(Z.Z,{}),(0,P.jsx)("div",{className:t.loginPage,children:(0,P.jsxs)(p.ZP,{container:!0,className:t.loginContainer,children:[(0,P.jsx)(p.ZP,{item:!0,className:"consoleTextBanner",xs:12,children:(0,P.jsxs)("div",{className:"left-items",children:[(0,P.jsx)("div",{className:"left-logo",children:"MEMO"}),(0,P.jsx)("div",{className:"text-line2",children:ae}),(0,P.jsx)("div",{className:"text-line3",children:"Memolabs Storage"})]})}),(0,P.jsxs)(p.ZP,{item:!0,className:"right-items ".concat(t.loginComponentContainer),xs:12,children:[ie,(0,P.jsx)("div",{className:t.learnMore})]}),(0,P.jsx)(p.ZP,{item:!0,xs:12,className:t.linkHolder})]})})]})})))},65771:function(e,t,n){n.d(t,{Z:function(){return w}});var i=n(36222),a=n(1048),o=n(32793),r=n(50390),s=n(44977),l=n(50076),c=n(91442),d=n(35477),m=n(14478),h=n(23060),u=n(8208),g=n(10594);function p(e){return(0,g.Z)("MuiInputAdornment",e)}var f,x=(0,n(43349).Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),v=n(15573),j=n(62559),Z=["children","className","component","disablePointerEvents","disableTypography","position","variant"],b=(0,u.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,c.Z)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,o.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:t.palette.action.active},"filled"===n.variant&&(0,i.Z)({},"&.".concat(x.positionStart,"&:not(.").concat(x.hiddenLabel,")"),{marginTop:16}),"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),w=r.forwardRef((function(e,t){var n=(0,v.Z)({props:e,name:"MuiInputAdornment"}),i=n.children,u=n.className,g=n.component,x=void 0===g?"div":g,w=n.disablePointerEvents,S=void 0!==w&&w,y=n.disableTypography,P=void 0!==y&&y,N=n.position,C=n.variant,L=(0,a.Z)(n,Z),A=(0,h.Z)()||{},I=C;C&&A.variant,A&&!I&&(I=A.variant);var k=(0,o.Z)({},n,{hiddenLabel:A.hiddenLabel,size:A.size,disablePointerEvents:S,position:N,variant:I}),E=function(e){var t=e.classes,n=e.disablePointerEvents,i=e.hiddenLabel,a=e.position,o=e.size,r=e.variant,s={root:["root",n&&"disablePointerEvents",a&&"position".concat((0,c.Z)(a)),r,i&&"hiddenLabel",o&&"size".concat((0,c.Z)(o))]};return(0,l.Z)(s,p,t)}(k);return(0,j.jsx)(m.Z.Provider,{value:null,children:(0,j.jsx)(b,(0,o.Z)({as:x,ownerState:k,className:(0,s.Z)(E.root,u),ref:t},L,{children:"string"!==typeof i||P?(0,j.jsxs)(r.Fragment,{children:["start"===N?f||(f=(0,j.jsx)("span",{className:"notranslate",children:"\u200b"})):null,i]}):(0,j.jsx)(d.Z,{color:"text.secondary",children:i})}))})}))}}]);
//# sourceMappingURL=2029.f1b568f7.chunk.js.map
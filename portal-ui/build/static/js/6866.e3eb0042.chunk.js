"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[6866],{86866:function(e,t,a){a.r(t);var n=a(23430),i=a(18489),o=a(50390),r=a(34424),l=a(86509),s=a(4285),c=a(66946),d=a(38342),u=a.n(d),m=a(25594),p=a(72462),h=a(44149),g=a(66964),f=a(51002),Z=a(30324),x=a(67754),v=a(92440),b=a(28948),j=a(65703),y=a(20129),C=a(1365),S=a(62559),k=(0,r.$j)(null,{setModalErrorSnackMessage:h.zb});t.default=(0,s.Z)((function(e){return(0,l.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({buttonContainer:{textAlign:"right"},multiContainer:{display:"flex",alignItems:"center"},sizeFactorContainer:{"& label":{display:"none"},"& div:first-child":{marginBottom:0,"@media (max-width: 600px)":{marginTop:"7px"}}}},p.bK),p.QV),p.DF),p.ID),{},{modalFormScrollable:(0,i.Z)((0,i.Z)({},p.ID.modalFormScrollable),{},{paddingRight:10})}))}))(k((function(e){var t=e.open,a=e.closeModalAndRefresh,i=e.classes,r=e.bucketName,l=e.setModalErrorSnackMessage,s=e.setReplicationRules,d=(0,o.useState)(!1),p=(0,n.Z)(d,2),h=p[0],k=p[1],R=(0,o.useState)("1"),w=(0,n.Z)(R,2),F=w[0],N=w[1],P=(0,o.useState)(""),M=(0,n.Z)(P,2),T=M[0],D=M[1],I=(0,o.useState)(""),B=(0,n.Z)(I,2),L=B[0],O=B[1],V=(0,o.useState)(""),K=(0,n.Z)(V,2),A=K[0],E=K[1],G=(0,o.useState)(""),U=(0,n.Z)(G,2),z=U[0],_=U[1],H=(0,o.useState)(""),q=(0,n.Z)(H,2),W=q[0],Y=q[1],Q=(0,o.useState)(""),$=(0,n.Z)(Q,2),J=$[0],X=$[1],ee=(0,o.useState)(""),te=(0,n.Z)(ee,2),ae=te[0],ne=te[1],ie=(0,o.useState)(!0),oe=(0,n.Z)(ie,2),re=oe[0],le=oe[1],se=(0,o.useState)(!0),ce=(0,n.Z)(se,2),de=ce[0],ue=ce[1],me=(0,o.useState)(!0),pe=(0,n.Z)(me,2),he=pe[0],ge=pe[1],fe=(0,o.useState)(!0),Ze=(0,n.Z)(fe,2),xe=Ze[0],ve=Ze[1],be=(0,o.useState)(""),je=(0,n.Z)(be,2),ye=je[0],Ce=je[1],Se=(0,o.useState)("async"),ke=(0,n.Z)(Se,2),Re=ke[0],we=ke[1],Fe=(0,o.useState)("100"),Ne=(0,n.Z)(Fe,2),Pe=Ne[0],Me=Ne[1],Te=(0,o.useState)("Gi"),De=(0,n.Z)(Te,2),Ie=De[0],Be=De[1],Le=(0,o.useState)("60"),Oe=(0,n.Z)(Le,2),Ve=Oe[0],Ke=Oe[1];(0,o.useEffect)((function(){if(0!==s.length){var e=s.reduce((function(e,t){return t.priority>e?t.priority:e}),0);N((e+1).toString())}else N("1")}),[s]);return(0,S.jsx)(f.Z,{modalOpen:t,onClose:function(){a()},title:"Set Bucket Replication",titleIcon:(0,S.jsx)(y.xR,{}),children:(0,S.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),k(!0),function(){var e=[{originBucket:r,destinationBucket:J}],t=parseInt(Ve),n="".concat(re?"https://":"http://").concat(A),i={accessKey:T,secretKey:L,targetURL:n,region:ae,bucketsRelation:e,syncMode:Re,bandwidth:"async"===Re?parseInt((0,b.Pw)(Pe,Ie,!0)):0,healthCheckPeriod:t,prefix:W,tags:ye,replicateDeleteMarkers:de,replicateDeletes:he,priority:parseInt(F),storageClass:z,replicateMetadata:xe};Z.Z.invoke("POST","/api/v1/buckets-replication",i).then((function(e){k(!1);var t=u()(e,"replicationState",[]);if(t.length>0){var n=t[0];return k(!1),n.errorString&&""!==n.errorString?void l({errorMessage:n.errorString,detailedError:""}):void a()}l({errorMessage:"No changes applied",detailedError:""})})).catch((function(e){k(!1),l(e)}))}()},children:(0,S.jsxs)(m.ZP,{container:!0,children:[(0,S.jsxs)(m.ZP,{item:!0,xs:12,className:i.modalFormScrollable,children:[(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(g.Z,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&N(e.target.value)},label:"Priority",value:F,pattern:"[0-9]*"})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(g.Z,{id:"targetURL",name:"targetURL",onChange:function(e){E(e.target.value)},placeholder:"play.min.io",label:"Target URL",value:A})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(v.Z,{checked:re,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:function(e){le(e.target.checked)},value:"yes"})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(g.Z,{id:"accessKey",name:"accessKey",onChange:function(e){D(e.target.value)},label:"Access Key",value:T})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(g.Z,{id:"secretKey",name:"secretKey",onChange:function(e){O(e.target.value)},label:"Secret Key",value:L})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(g.Z,{id:"targetBucket",name:"targetBucket",onChange:function(e){X(e.target.value)},label:"Target Bucket",value:J})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(g.Z,{id:"region",name:"region",onChange:function(e){ne(e.target.value)},label:"Region",value:ae})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(x.Z,{id:"replication_mode",name:"replication_mode",onChange:function(e){we(e.target.value)},label:"Replication Mode",value:Re,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]})}),"async"===Re&&(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)("div",{className:i.multiContainer,children:(0,S.jsx)(g.Z,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:function(e){e.target.validity.valid&&Me(e.target.value)},label:"Bandwidth",value:Pe,min:"0",pattern:"[0-9]*",overlayObject:(0,S.jsx)(C.Z,{id:"quota_unit",onUnitChange:function(e){Be(e)},unitSelected:Ie,unitsList:(0,b.zQ)(["Ki"]),disabled:!1})})})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(g.Z,{id:"healthCheck",name:"healthCheck",onChange:function(e){Ke(e.target.value)},label:"Health Check Duration",value:Ve})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:"".concat(i.spacerTop," ").concat(i.formFieldRow),children:(0,S.jsx)(g.Z,{id:"storageClass",name:"storageClass",onChange:function(e){_(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:z})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,children:(0,S.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,S.jsx)("legend",{className:i.descriptionText,children:"Object Filters"}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(g.Z,{id:"prefix",name:"prefix",onChange:function(e){Y(e.target.value)},placeholder:"prefix",label:"Prefix",value:W})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(j.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){Ce(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),(0,S.jsx)(m.ZP,{item:!0,xs:12,children:(0,S.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,S.jsx)("legend",{className:i.descriptionText,children:"Replication Options"}),(0,S.jsxs)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:[(0,S.jsx)(v.Z,{checked:xe,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){ve(e.target.checked)},value:xe,description:"Metadata Sync"}),(0,S.jsx)(v.Z,{checked:de,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){ue(e.target.checked)},value:de,description:"Replicate soft deletes"})]}),(0,S.jsx)(m.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,S.jsx)(v.Z,{checked:he,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){ge(e.target.checked)},value:he,description:"Replicate versioned deletes"})})]})})]}),(0,S.jsxs)(m.ZP,{item:!0,xs:12,className:i.modalButtonBar,children:[(0,S.jsx)(c.Z,{type:"button",variant:"outlined",color:"primary",disabled:h,onClick:function(){a()},children:"Cancel"}),(0,S.jsx)(c.Z,{type:"submit",variant:"contained",color:"primary",disabled:h,children:"Save"})]})]})})})})))},1365:function(e,t,a){var n=a(23430),i=a(50390),o=a(86509),r=a(4285),l=a(26936),s=a(31680),c=a(62559);t.Z=(0,r.Z)((function(e){return(0,o.Z)({buttonTrigger:{border:"#F0F2F2 1px solid",borderRadius:3,color:"#838383",backgroundColor:"#fff",fontSize:12}})}))((function(e){var t=e.classes,a=e.id,o=e.unitSelected,r=e.unitsList,d=e.disabled,u=void 0!==d&&d,m=e.onUnitChange,p=i.useState(null),h=(0,n.Z)(p,2),g=h[0],f=h[1],Z=Boolean(g),x=function(e){f(null),""!==e&&m&&m(e)};return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)("button",{id:"".concat(a,"-button"),"aria-controls":"".concat(a,"-menu"),"aria-haspopup":"true","aria-expanded":Z?"true":void 0,onClick:function(e){f(e.currentTarget)},className:t.buttonTrigger,disabled:u,type:"button",children:o}),(0,c.jsx)(l.Z,{id:"".concat(a,"-menu"),"aria-labelledby":"".concat(a,"-button"),anchorEl:g,open:Z,onClose:function(){x("")},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:r.map((function(e){return(0,c.jsx)(s.Z,{onClick:function(){return x(e.value)},children:e.label},"itemUnit-".concat(e.value,"-").concat(e.label))}))})]})}))},67754:function(e,t,a){var n=a(18489),i=a(50390),o=a(25594),r=a(46413),l=a(36554),s=a(94187),c=a(47554),d=a(43965),u=a(31680),m=a(86509),p=a(4285),h=a(72462),g=a(97538),f=a(62559),Z=(0,p.Z)((function(e){return(0,m.Z)({root:{height:38,lineHeight:1,"label + &":{marginTop:e.spacing(3)}},input:{height:38,position:"relative",color:"#07193E",fontSize:13,fontWeight:600,padding:"8px 20px 10px 10px",border:"#e5e5e5 1px solid",borderRadius:4,display:"flex",alignItems:"center","&:hover":{borderColor:"#393939"},"&:focus":{backgroundColor:"#fff"}}})}))(r.ZP);t.Z=(0,p.Z)((function(e){return(0,m.Z)((0,n.Z)((0,n.Z)((0,n.Z)({},h.YI),h.Hr),{},{inputLabel:(0,n.Z)((0,n.Z)({},h.YI.inputLabel),{},{"& span":{fontWeight:"normal"}}),fieldContainer:{display:"flex","@media (max-width: 600px)":{flexFlow:"column"}}}))}))((function(e){var t=e.classes,a=e.id,n=e.name,r=e.onChange,m=e.options,p=e.label,h=e.tooltip,x=void 0===h?"":h,v=e.value,b=e.disabled,j=void 0!==b&&b;return(0,f.jsx)(i.Fragment,{children:(0,f.jsxs)(o.ZP,{item:!0,xs:12,className:t.fieldContainer,children:[""!==p&&(0,f.jsxs)(l.Z,{htmlFor:a,className:t.inputLabel,children:[(0,f.jsx)("span",{children:p}),""!==x&&(0,f.jsx)("div",{className:t.tooltipContainer,children:(0,f.jsx)(s.Z,{title:x,placement:"top-start",children:(0,f.jsx)("div",{className:t.tooltip,children:(0,f.jsx)(g.Z,{})})})})]}),(0,f.jsx)(c.Z,{fullWidth:!0,children:(0,f.jsx)(d.Z,{id:a,name:n,value:v,onChange:r,input:(0,f.jsx)(Z,{}),disabled:j,children:m.map((function(e){return(0,f.jsx)(u.Z,{value:e.value,children:e.label},"select-".concat(n,"-").concat(e.label))}))})})]})})}))},4247:function(e,t,a){a.d(t,{V:function(){return i}});var n=a(10594);function i(e){return(0,n.Z)("MuiDivider",e)}var o=(0,a(43349).Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=o},31680:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(36222),i=a(1048),o=a(32793),r=a(50390),l=a(44977),s=a(50076),c=a(36128),d=a(8208),u=a(15573),m=a(57308),p=a(86875),h=a(40839),g=a(3299),f=a(4247),Z=a(2198),x=a(23586),v=a(10594);function b(e){return(0,v.Z)("MuiMenuItem",e)}var j=(0,a(43349).Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),y=a(62559),C=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],S=(0,d.ZP)(p.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((function(e){var t,a=e.theme,i=e.ownerState;return(0,o.Z)({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!i.disableGutters&&{paddingLeft:16,paddingRight:16},i.divider&&{borderBottom:"1px solid ".concat(a.palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:a.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,n.Z)(t,"&.".concat(j.selected),(0,n.Z)({backgroundColor:(0,c.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity)},"&.".concat(j.focusVisible),{backgroundColor:(0,c.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)})),(0,n.Z)(t,"&.".concat(j.selected,":hover"),{backgroundColor:(0,c.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,c.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity)}}),(0,n.Z)(t,"&.".concat(j.focusVisible),{backgroundColor:a.palette.action.focus}),(0,n.Z)(t,"&.".concat(j.disabled),{opacity:a.palette.action.disabledOpacity}),(0,n.Z)(t,"& + .".concat(f.Z.root),{marginTop:a.spacing(1),marginBottom:a.spacing(1)}),(0,n.Z)(t,"& + .".concat(f.Z.inset),{marginLeft:52}),(0,n.Z)(t,"& .".concat(x.Z.root),{marginTop:0,marginBottom:0}),(0,n.Z)(t,"& .".concat(x.Z.inset),{paddingLeft:36}),(0,n.Z)(t,"& .".concat(Z.Z.root),{minWidth:36}),t),!i.dense&&(0,n.Z)({},a.breakpoints.up("sm"),{minHeight:"auto"}),i.dense&&(0,o.Z)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,(0,n.Z)({},"& .".concat(Z.Z.root," svg"),{fontSize:"1.25rem"})))})),k=r.forwardRef((function(e,t){var a=(0,u.Z)({props:e,name:"MuiMenuItem"}),n=a.autoFocus,c=void 0!==n&&n,d=a.component,p=void 0===d?"li":d,f=a.dense,Z=void 0!==f&&f,x=a.divider,v=void 0!==x&&x,j=a.disableGutters,k=void 0!==j&&j,R=a.focusVisibleClassName,w=a.role,F=void 0===w?"menuitem":w,N=a.tabIndex,P=(0,i.Z)(a,C),M=r.useContext(m.Z),T={dense:Z||M.dense||!1,disableGutters:k},D=r.useRef(null);(0,h.Z)((function(){c&&D.current&&D.current.focus()}),[c]);var I,B=(0,o.Z)({},a,{dense:T.dense,divider:v,disableGutters:k}),L=function(e){var t=e.disabled,a=e.dense,n=e.divider,i=e.disableGutters,r=e.selected,l=e.classes,c={root:["root",a&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",r&&"selected"]},d=(0,s.Z)(c,b,l);return(0,o.Z)({},l,d)}(a),O=(0,g.Z)(D,t);return a.disabled||(I=void 0!==N?N:-1),(0,y.jsx)(m.Z.Provider,{value:T,children:(0,y.jsx)(S,(0,o.Z)({ref:O,role:F,tabIndex:I,component:p,focusVisibleClassName:(0,l.Z)(L.focusVisible,R)},P,{ownerState:B,classes:L}))})}))}}]);
//# sourceMappingURL=6866.e3eb0042.chunk.js.map
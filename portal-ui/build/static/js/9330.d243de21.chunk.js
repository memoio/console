(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9330],{8235:function(e,n,t){"use strict";t(50390);var s=t(86509),i=t(4285),o=t(25594),r=t(62559);n.Z=(0,i.Z)((function(e){return(0,s.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,s=e.title,i=e.help;return(0,r.jsx)("div",{className:n.root,children:(0,r.jsxs)(o.ZP,{container:!0,children:[(0,r.jsxs)(o.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,s]}),(0,r.jsx)(o.ZP,{item:!0,xs:12,className:n.helpText,children:i})]})})}))},25534:function(e,n,t){"use strict";var s=t(18489),i=(t(50390),t(25594)),o=t(86509),r=t(4285),a=t(72462),c=t(62559);n.Z=(0,r.Z)((function(e){return(0,o.Z)((0,s.Z)({},a.Bw))}))((function(e){var n=e.classes,t=e.className,s=void 0===t?"":t,o=e.children;return(0,c.jsx)("div",{className:n.contentSpacer,children:(0,c.jsx)(i.ZP,{container:!0,children:(0,c.jsx)(i.ZP,{item:!0,xs:12,className:s,children:o})})})}))},35721:function(e,n,t){"use strict";var s=t(50390),i=t(34424),o=t(25594),r=t(86509),a=t(4285),c=t(35477),l=t(95467),d=t(26805),g=t(44078),u=t(5265),f=t(95410),m=t(62559),h={toggleList:u.kQ},x=(0,i.$j)((function(e){return{sidebarOpen:e.system.sidebarOpen,operatorMode:e.system.operatorMode,managerObjects:e.objectBrowser.objectManager.objectsToManage,features:e.console.session.features}}),h);n.Z=x((0,a.Z)((function(e){return(0,r.Z)({headerContainer:{width:"100%",minHeight:79,display:"flex",backgroundColor:"#fff",left:0,boxShadow:"rgba(0,0,0,.08) 0 3px 10px"},label:{display:"flex",justifyContent:"flex-start",alignItems:"center"},labelStyle:{color:"#000",fontSize:18,fontWeight:700,marginLeft:21,marginTop:8},rightMenu:{textAlign:"right"},logo:{marginLeft:34,fill:e.palette.primary.main,"& .min-icon":{width:120}},middleComponent:{display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var n=e.classes,t=e.label,i=e.actions,r=e.sidebarOpen,a=e.operatorMode,u=e.managerObjects,h=e.toggleList,x=e.middleComponent;return e.features.includes("hide-menu")?(0,m.jsx)(s.Fragment,{}):(0,m.jsxs)(o.ZP,{container:!0,className:"".concat(n.headerContainer," page-header"),direction:"row",alignItems:"center",children:[(0,m.jsxs)(o.ZP,{item:!0,xs:12,sm:12,md:x?3:6,className:n.label,sx:{paddingTop:["15px","15px","0","0"]},children:[!r&&(0,m.jsx)("div",{className:n.logo,children:a?(0,m.jsx)(d.Z,{}):(0,m.jsx)(g.Z,{})}),(0,m.jsx)(c.Z,{variant:"h4",className:n.labelStyle,children:t})]}),x&&(0,m.jsx)(o.ZP,{item:!0,xs:12,sm:12,md:6,className:n.middleComponent,sx:{marginTop:["10px","10px","0","0"]},children:x}),(0,m.jsxs)(o.ZP,{item:!0,xs:12,sm:12,md:x?3:6,className:n.rightMenu,children:[i&&i,u&&u.length>0&&(0,m.jsx)(l.Z,{color:"primary","aria-label":"Refresh List",component:"span",onClick:function(){h()},id:"object-manager-toggle",size:"large",children:(0,m.jsx)(f.gx,{})})]})]})})))},39330:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var s=t(23430),i=t(18489),o=t(50390),r=t(69686),a=t(34424),c=t(71497),l="error",d="success",g="inProgress",u=t(86509),f=t(4285),m=t(51774),h=t(72462),x=t(25594),p=t(66946),j=t(35721),v=t(44149),b=t(37354),Z=t(95410),w=t(30324),y=t(41227),C=t(62559),S=(0,f.Z)((function(e){return(0,u.Z)({titleBar:{borderBottom:"#E5E5E5 1px solid",padding:"30px 25px",fontSize:20,color:"#07193E",fontWeight:"bold",borderRadius:"10px 10px 0px 0px",paddingTop:0},divisorContainer:{padding:25},serversData:{color:"#07193E",fontSize:18,display:"flex",alignItems:"center","& svg":{marginRight:10}},minioVersionContainer:{fontSize:12,color:"#07193E",justifyContent:"center",alignSelf:"center",alignItems:"center",display:"flex"},versionIcon:{color:"#07193E",marginRight:20},loaderAlign:{textAlign:"center"},advancedContainer:{justifyContent:"flex-end",display:"flex"},optionsContainer:{padding:0,marginBottom:25},advancedConfiguration:{color:"#2781B0",fontSize:10,textDecoration:"underline",border:"none",backgroundColor:"transparent",cursor:"pointer",alignItems:"center",display:"flex","&:hover":{color:"#07193E"},"& svg":{width:10,alignSelf:"center",marginLeft:5}},advancedOpen:{transform:"rotateZ(-90deg) translateX(-4px) translateY(2px)"},advancedClosed:{transform:"rotateZ(90deg)"},advancedContent:{backgroundColor:"#F5F7F9",maxHeight:0,transitionDuration:"0.3s",overflow:"hidden",padding:"0 15px","&.open":{maxHeight:400,padding:15}}})}))((function(e){var n=e.title,t=e.children,i=e.classes,r=e.advancedVisible,a=e.advancedContent,c=(0,o.useState)("N/A"),l=(0,s.Z)(c,2),d=l[0],g=l[1],u=(0,o.useState)(0),f=(0,s.Z)(u,2),m=f[0],h=f[1],p=(0,o.useState)(0),j=(0,s.Z)(p,2),v=j[0],S=j[1],N=(0,o.useState)(!0),P=(0,s.Z)(N,2),E=P[0],k=P[1],I=(0,o.useState)(!1),D=(0,s.Z)(I,2),O=D[0],M=D[1];return(0,o.useEffect)((function(){E&&w.Z.invoke("GET","/api/v1/admin/info?defaultOnly=true").then((function(e){var n,t=null===(n=e.servers)||void 0===n?void 0:n.length;if(h(t),e.servers.length>0){g(e.servers[0].version);var s=e.servers.reduce((function(e,n){return e+n.drives.length}),0);S(s)}k(!1)})).catch((function(e){k(!1)}))}),[E]),(0,C.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,C.jsx)(x.ZP,{item:!0,xs:12,className:i.titleBar,children:n}),(0,C.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,C.jsxs)(x.ZP,{item:!0,xs:12,className:i.optionsContainer,children:[(0,C.jsx)(x.ZP,{container:!0,className:i.divisorContainer,children:E?(0,C.jsx)(o.Fragment,{children:(0,C.jsx)(x.ZP,{item:!0,xs:12,className:i.loaderAlign,children:(0,C.jsx)(y.Z,{style:{width:25,height:25}})})}):(0,C.jsxs)(o.Fragment,{children:[(0,C.jsxs)(x.ZP,{item:!0,xs:12,md:4,className:i.serversData,children:[(0,C.jsx)(Z.FU,{})," ",(0,C.jsx)("strong",{children:m}),"\xa0nodes,\xa0",(0,C.jsx)("strong",{children:v}),"\xa0 drives"]}),(0,C.jsxs)(x.ZP,{item:!0,xs:12,md:4,className:i.minioVersionContainer,children:[(0,C.jsx)("span",{className:i.versionIcon,children:(0,C.jsx)(Z.Db,{})})," ","MinIO VERSION\xa0",(0,C.jsx)("strong",{children:d})]}),(0,C.jsx)(x.ZP,{item:!0,xs:12,md:4,className:i.advancedContainer,children:r&&(0,C.jsxs)("button",{onClick:function(){M(!O)},className:i.advancedConfiguration,children:["Advanced configurations"," ",(0,C.jsx)("span",{className:O?i.advancedOpen:i.advancedClosed,children:(0,C.jsx)(b.Z,{})})]})})]})}),a&&(0,C.jsx)(x.ZP,{xs:12,className:"".concat(i.advancedContent," ").concat(O?"open":""),children:a})]}),t]})]})})),N=t(25534),P=t(8235),E=t(47424),k=(0,a.$j)((function(e){return{message:e.healthInfo.message,serverDiagnosticStatus:e.system.serverDiagnosticStatus}}),{healthInfoMessageReceived:c.ec,healthInfoResetMessage:c.Xp,setSnackBarMessage:v.y1,setServerDiagStat:v.KY})((0,f.Z)((function(e){return(0,u.Z)((0,i.Z)((0,i.Z)({loading:{paddingTop:8,paddingLeft:40},buttons:{justifyContent:"flex-start",gap:20},localMessage:{fontSize:24,color:"#07193E",fontWeight:"bold",textAlign:"center",marginBottom:10},startDiagnostic:{textAlign:"center",marginBottom:25},progressResult:{textAlign:"center",marginBottom:25},diagNew:{textAlign:"right",margin:25,marginBottom:0}},h.OR),(0,h.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=e.healthInfoMessageReceived,i=e.healthInfoResetMessage,a=e.message,c=e.setSnackBarMessage,u=e.setServerDiagStat,f=e.serverDiagnosticStatus,h=(0,o.useState)(!1),v=(0,s.Z)(h,2),b=v[0],Z=v[1],w=(0,o.useState)(!1),k=(0,s.Z)(w,2),I=k[0],D=k[1],O=(0,o.useState)(!0),M=(0,s.Z)(O,2),B=M[0],R=M[1],A=(0,o.useState)(""),T=(0,s.Z)(A,2),F=T[0],_=T[1],L=(0,o.useState)("New Diagnostic"),z=(0,s.Z)(L,2),V=z[0],W=z[1];return(0,o.useEffect)((function(){f!==g?f===d&&I?W("Diagnostic complete"):f!==l||W("Error"):W("Diagnostic in progress...")}),[f,b,I]),(0,o.useEffect)((function(){f===d&&a!=={}&&R(!1),f===g&&R(!0),Z(!1)}),[f,a]),(0,o.useEffect)((function(){if(b){i();var e=new URL(window.location.toString()),n=e.port,s=(0,m.x2)(e.protocol),o=new r.w3cwebsocket("".concat(s,"://").concat(e.hostname,":").concat(n,"/ws/health-info?deadline=1h")),a=null;null!==o&&(o.onopen=function(){console.log("WebSocket Client Connected"),o.send("ok"),a=setInterval((function(){o.send("ok")}),1e4),D(!0),_("Diagnostic started. Please do not refresh page during diagnosis."),u(g)},o.onmessage=function(e){var n=JSON.parse(e.data.toString());n.timestamp=new Date(n.timestamp.toString()),t(n)},o.onerror=function(e){console.log("error closing websocket:",e.message),o.close(1e3),clearInterval(a),u(l)},o.onclose=function(e){clearInterval(a),e.code===m.HE||e.code===m.ci||e.code===m.V9?(console.log("connection closed by server with code:",e.code),_("An error occurred while getting Diagnostic file."),u(l)):(console.log("connection closed by server"),_("Diagnostic file is ready to be downloaded."),u(d))})}else Z(!1)}),[t,i,b,c,u]),(0,C.jsxs)(o.Fragment,{children:[(0,C.jsx)(j.Z,{label:"Health"}),(0,C.jsxs)(N.Z,{children:[(0,C.jsx)(x.ZP,{item:!0,xs:12,className:n.boxy,children:(0,C.jsx)(S,{title:V,advancedVisible:!1,children:(0,C.jsxs)(x.ZP,{container:!0,className:n.buttons,children:[!I&&(0,C.jsx)(x.ZP,{item:!0,xs:12,className:n.startDiagnostic,children:(0,C.jsx)(p.Z,{type:"submit",variant:"contained",color:"primary",disabled:b,onClick:function(){return Z(!0)},children:"Start Diagnostic"})},"start-diag"),I&&(0,C.jsxs)(x.ZP,{item:!0,xs:12,className:n.progressResult,children:[(0,C.jsx)("div",{className:n.localMessage,children:F}),f===g?(0,C.jsx)("div",{className:n.loading,children:(0,C.jsx)(y.Z,{style:{width:25,height:25}})}):(0,C.jsxs)(o.Fragment,{children:[f!==l&&(0,C.jsx)(p.Z,{type:"submit",variant:"contained",color:"primary",onClick:function(){!function(e,n){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),t.setAttribute("download",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}("diagnostic.json",JSON.stringify(a,null,2))},disabled:B,children:"Download"}),(0,C.jsx)(x.ZP,{item:!0,xs:12,className:n.diagNew,children:(0,C.jsx)(p.Z,{id:"start-new-diagnostic",type:"submit",variant:"contained",color:"primary",disabled:b,onClick:function(){return Z(!0)},children:"Start New Diagnostic"})})]})]},"start-download")]})})}),!I&&(0,C.jsxs)(o.Fragment,{children:[(0,C.jsx)("br",{}),(0,C.jsx)(P.Z,{title:"During the health diagnostics run all production traffic will be suspended.",iconComponent:(0,C.jsx)(E.Z,{}),help:(0,C.jsx)(o.Fragment,{})})]})]})]})})))},51774:function(e,n,t){"use strict";t.d(n,{V9:function(){return s},ci:function(){return i},HE:function(){return o},x2:function(){return r}});var s=1006,i=1008,o=1011,r=function(e){var n="ws";return"https:"===e&&(n="wss"),n}},37354:function(e,n,t){"use strict";var s=t(64119);n.Z=void 0;var i=s(t(66830)),o=t(62559),r=(0,i.default)((0,o.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");n.Z=r},3930:function(e){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},69686:function(e,n,t){var s;if("object"===typeof globalThis)s=globalThis;else try{s=t(3930)}catch(a){}finally{if(s||"undefined"===typeof window||(s=window),!s)throw new Error("Could not determine global this")}var i=s.WebSocket||s.MozWebSocket,o=t(84994);function r(e,n){return n?new i(e,n):new i(e)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(r,e,{get:function(){return i[e]}})})),e.exports={w3cwebsocket:i?r:null,version:o}},84994:function(e,n,t){e.exports=t(19794).version},19794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=9330.d243de21.chunk.js.map
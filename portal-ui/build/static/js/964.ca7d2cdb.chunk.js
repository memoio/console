"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[964],{10694:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var s=t(23430),a=t(18489),c=t(50390),o=t(34424),r=t(86509),l=t(4285),i=t(25594),u=t(30324),d=t(56805),f=t(44149),Z=t(20129),h=t(8174),x=t(25233),p=t(35721),m=t(72462),j=t(51002),S=t(66964),g=t(66946),v=t(81378),w=t(62559),y=(0,o.$j)(null,{setModalErrorSnackMessage:f.zb}),C=(0,l.Z)((function(e){return(0,r.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({buttonContainer:{textAlign:"right"}},m.ID),m.DF),m.bK),(0,m.Bz)(e.spacing(4))))}))(y((function(e){var n=e.classes,t=e.open,a=e.closeModal,o=e.setModalErrorSnackMessage,r=(0,c.useState)(""),l=(0,s.Z)(r,2),d=l[0],f=l[1],h=(0,c.useState)(""),x=(0,s.Z)(h,2),p=x[0],m=x[1],y=(0,c.useState)(""),C=(0,s.Z)(y,2),b=C[0],A=C[1],P=(0,c.useState)(!1),k=(0,s.Z)(P,2),M=k[0],E=k[1];return t?(0,w.jsx)(j.Z,{title:"Change Password",modalOpen:t,onClose:function(){m(""),A(""),f(""),a()},titleIcon:(0,w.jsx)(Z.I,{}),children:(0,w.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){if(e.preventDefault(),p===b){if(p.length<8)o({errorMessage:"Passwords must be at least 8 characters long",detailedError:""});else if(!M){E(!0);var n={current_secret_key:d,new_secret_key:p};u.Z.invoke("POST","/api/v1/account/change-password",n).then((function(){E(!1),m(""),A(""),f(""),a()})).catch((function(e){E(!1),m(""),A(""),f(""),o(e)}))}}else o({errorMessage:"New passwords don't match",detailedError:""})}(e)},children:(0,w.jsxs)(i.ZP,{container:!0,children:[(0,w.jsxs)(i.ZP,{item:!0,xs:12,className:n.modalFormScrollable,children:[(0,w.jsx)(i.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"current-password",name:"current-password",onChange:function(e){f(e.target.value)},label:"Current Password",type:"password",value:d})}),(0,w.jsx)(i.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"new-password",name:"new-password",onChange:function(e){m(e.target.value)},label:"New Password",type:"password",value:p})}),(0,w.jsx)(i.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"re-new-password",name:"re-new-password",onChange:function(e){A(e.target.value)},label:"Type New Password Again",type:"password",value:b})})]}),(0,w.jsx)(i.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:(0,w.jsx)(g.Z,{type:"submit",variant:"contained",color:"primary",disabled:M||!(d.length>0&&p.length>0&&b.length>0),children:"Save"})}),M&&(0,w.jsx)(i.ZP,{item:!0,xs:12,children:(0,w.jsx)(v.Z,{})})]})})}):null}))),b=t(8235),A=t(25534),P=t(23165),k=t(37882),M=t(49495),E=t(30140),N=t(53224),F=t(73726),R=t(31529),_=t(94198),D=(0,k.Z)(c.lazy((function(){return t.e(8394).then(t.bind(t,48394))}))),I=(0,k.Z)(c.lazy((function(){return t.e(7664).then(t.bind(t,47664))}))),K=(0,k.Z)(c.lazy((function(){return t.e(1140).then(t.bind(t,39080))}))),T=(0,o.$j)(null,{displayErrorMessage:f.Ih}),z=(0,l.Z)((function(e){return(0,r.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},m.OR),m.qg),{},{searchField:(0,a.Z)((0,a.Z)({},m.qg.searchField),{},{marginRight:"auto",maxWidth:380})},m.VX),(0,m.Bz)(e.spacing(4))))}))(T((function(e){var n=e.classes,t=e.displayErrorMessage,a=(0,c.useState)([]),o=(0,s.Z)(a,2),r=o[0],l=o[1],m=(0,c.useState)(!1),j=(0,s.Z)(m,2),S=j[0],g=j[1],v=(0,c.useState)(""),y=(0,s.Z)(v,2),k=y[0],T=y[1],z=(0,c.useState)(!1),O=(0,s.Z)(z,2),B=O[0],L=O[1],V=(0,c.useState)(!1),q=(0,s.Z)(V,2),U=q[0],$=q[1],G=(0,c.useState)(null),J=(0,s.Z)(G,2),W=J[0],X=J[1],H=(0,c.useState)(!1),Q=(0,s.Z)(H,2),Y=Q[0],ee=Q[1],ne=(0,c.useState)(null),te=(0,s.Z)(ne,2),se=te[0],ae=te[1],ce=(0,c.useState)(!1),oe=(0,s.Z)(ce,2),re=oe[0],le=oe[1],ie=(0,c.useState)([]),ue=(0,s.Z)(ie,2),de=ue[0],fe=ue[1],Ze=(0,c.useState)(!1),he=(0,s.Z)(Ze,2),xe=he[0],pe=he[1],me=(0,c.useState)(!1),je=(0,s.Z)(me,2),Se=je[0],ge=je[1];(0,c.useEffect)((function(){ve()}),[]),(0,c.useEffect)((function(){S&&u.Z.invoke("GET","/api/v1/service-accounts").then((function(e){var n=e.sort(x.V2);g(!1),l(n)})).catch((function(e){t(e),g(!1)}))}),[S,g,l,t]);var ve=function(){g(!0)},we=[{type:"view",onClick:function(e){X(e),ge(!0)}},{type:"delete",onClick:function(e){X(e),$(!0)}}],ye=r.filter((function(e){return e.toLowerCase().includes(k.toLowerCase())}));return(0,w.jsxs)(c.Fragment,{children:[B&&(0,w.jsx)(D,{open:B,closeModalAndRefresh:function(e){!function(e){if(L(!1),ve(),null!==e){var n={console:{accessKey:"".concat(e.accessKey),secretKey:"".concat(e.secretKey),url:"".concat(e.url)}};ae(n),ee(!0)}}(e)}}),U&&(0,w.jsx)(I,{deleteOpen:U,selectedServiceAccount:W,closeDeleteModalAndRefresh:function(e){!function(e){$(!1),e&&ve()}(e)}}),xe&&(0,w.jsx)(R.Z,{deleteOpen:xe,selectedSAs:de,closeDeleteModalAndRefresh:function(e){pe(!1),e&&((0,f.y1)("Service accounts deleted successfully."),fe([]),g(!0))}}),Y&&(0,w.jsx)(K,{newServiceAccount:se,open:Y,closeModal:function(){ee(!1),ae(null)},entity:"Service Account"}),Se&&(0,w.jsx)(_.Z,{open:Se,selectedAccessKey:W,closeModalAndRefresh:function(){ge(!1),g(!0)}}),(0,w.jsx)(C,{open:re,closeModal:function(){return le(!1)}}),(0,w.jsx)(p.Z,{label:"Service Accounts"}),(0,w.jsxs)(A.Z,{children:[(0,w.jsxs)(i.ZP,{item:!0,xs:12,className:n.actionsTray,children:[(0,w.jsx)(P.Z,{placeholder:"Search Service Accounts",onChange:T,overrideClass:n.searchField,value:k}),(0,w.jsxs)(d.Z,{sx:{display:"flex"},children:[" ",(0,w.jsx)(N.Z,{tooltip:"Delete Selected",onClick:function(){pe(!0)},text:"Delete Selected",icon:(0,w.jsx)(Z.pJ,{}),color:"secondary",disabled:0===de.length,variant:"outlined"}),(0,w.jsx)(E.s,{scopes:[M.Ft.ADMIN_CREATE_USER],resource:M.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,w.jsx)(N.Z,{onClick:function(){return le(!0)},text:"Change Password",icon:(0,w.jsx)(Z.tv,{}),color:"primary",variant:"outlined"})}),(0,w.jsx)(N.Z,{onClick:function(){L(!0),X(null)},text:"Create service account",icon:(0,w.jsx)(Z.dt,{}),color:"primary",variant:"contained"})]})]}),(0,w.jsx)(i.ZP,{item:!0,xs:12,className:n.tableBlock,children:(0,w.jsx)(h.Z,{isLoading:S,records:ye,entityName:"Service Accounts",idField:"",columns:[{label:"Service Account",elementKey:""}],itemActions:we,selectedItems:de,onSelect:function(e){return(0,F._0)(e,fe,de)},onSelectAll:function(){de.length!==r.length?fe(r):fe([])}})}),(0,w.jsx)(i.ZP,{item:!0,xs:12,marginTop:"15px",children:(0,w.jsx)(b.Z,{title:"Learn more about SERVICE ACCOUNTS",iconComponent:(0,w.jsx)(Z.fr,{}),help:(0,w.jsx)(c.Fragment,{})})})]})]})})))}}]);
//# sourceMappingURL=964.ca7d2cdb.chunk.js.map